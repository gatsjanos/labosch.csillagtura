os: linux
language: java
services:
  - docker
env:
  - $DEPLOY_TO_KSZK=false

jobs:
  include:
    - stage: InitialSteps
      script: chmod +x ./pipeline/stages/docker-build.sh
    - stage: DockerBuild
      script: ./pipeline/stages/docker-build.sh
    - stage: DeployToKSZK
      script: sh -c "[ \"$DEPLOY_TO_KSZK\" = \"true\" ] && ./pipeline/deploy-to-kszk.sh || echo Skipping deploy to KSZK."

install: skip
script: skip